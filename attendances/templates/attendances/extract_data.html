{% extends "base/layout.html" %}

{% load staticfiles %}

{% block head-extra %}
<link href="{% static 'css/datatables.min.css' %}" rel="stylesheet" />

<script type="text/javascript" src="{% static 'js/datatables.min.js' %}" ></script>
<script type="text/javascript" src="{% static 'js/datatables_custom.js' %}" ></script>
{% endblock head-extra %}


{% block main %}

<script>
    $( document ).ready(function() {
        $('#table_events').DataTable();
    });
</script>
<h1>Estrazione dati</h1>
Nei file sono riportati in corsivo gli studenti non galileiani.

<div>
    <table class="table table-striped table-hover" id="table_events">
        <thead>
            <tr>
                <th>Data</th>
                <th>Classe</th>
                <th>Aula</th>
                <th>Titolo</th>
                <th>Presenti</th>
                <th>Estrai</th>
            </tr>
        </thead>
        <tbody>
        {% for e in list %}
            <tr>
                <td>
                    {{ e.start | date:'d/m/Y' }}
                </td>
                <td>
                    {% if e.activity.category != "A" %}
                        {{ e.activity.category }}
                    {% endif %}
                </td>
                <td>
                    {{ e.room }}
                </td>
                <td>
                    {{ e.activity.title }}
                </td>
                <td>
                    {{ e.num_presences }}
                </td>
                <td>
                    <a href="{% url 'attendances:extract' event=e.pk %}">
                        <button class="btn btn-primary"><span class="fas fa-download"></span></button>
                    </a>
                </td>
        {% empty %}
            <tr>
                <td colspan="6">Nessuna presenza ancora registrata.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% for e in event_list %}
        {{e}} {{e.num_presences}} <br/>
    {% endfor %}
</div>
{% endblock main %}
